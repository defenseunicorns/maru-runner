tasks:
  - name: default
    description: Run scripts in Risor
    outputs:
      user-agent: ${{ steps.data["user-agent"] | strings.to_upper }}
    steps:
      - id: data
        uses: http-get
        with:
          url: https://httpbin.org/get
      # - id: get-user-agent
      #   script: |
      #     json.unmarshal(steps.data).headers["User-Agent"]
  - name: http-get
    inputs:
      url:
        required: true
    outputs:
      user-agent: ${{ steps.fetch.headers["User-Agent"] }}
      url: ${{ inputs.url }}
    steps:
      - id: fetch
        script: |
          fetch(inputs.url).json()
